# =============================================================================
# Fluent Bit 4.0.3 파서 설정 - TCP JSON 중심
# =============================================================================

# TCP로 받는 JSON 로그 파서 (기본 JSON 파서 사용)
[PARSER]
    Name        tcp_json
    Format      json
    Time_Key    timestamp
    Time_Format %Y-%m-%dT%H:%M:%S.%L%z
    Time_Keep   On

# p6spy SQL 로그 파서 - 쿼리 세부 정보 추출
[PARSER]
    Name        p6spy_parser
    Format      regex
    Regex       ^\[(?<statement_type>\w+)\]\s*\|\s*(?<execution_time>\d+)\s*ms\s*\|\s*(?<sql_query>.*)$
    Types       execution_time:integer
